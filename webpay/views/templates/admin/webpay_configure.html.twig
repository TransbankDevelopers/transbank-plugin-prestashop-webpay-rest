{% extends '@Modules/webpay/views/templates/admin/configure_layout.html.twig' %}

{% block tab %}

    {% include '@Modules/webpay/views/templates/admin/tabs.html.twig' with {'tabActive': 1} %}

    {% form_theme webpayPlusForm 'PrestaShopBundle:Admin/TwigTemplateForm:prestashop_ui_kit.html.twig' %}
    
    {{ form_start(webpayPlusForm, {attr : {class: 'form'}, action: path('ps_controller_webpay_configure_webpay_plus_form_save') }) }}
    <div class="card">
        <h3 class="card-header">
            <i class="material-icons">settings</i> {{ 'Webpay Plus'|trans({}, 'Modules.WebpayPlus.Admin') }}
        </h3>
        <div class="card-block row">
            <div class="col">
                <img src="{{ asset('../modules/webpay/views/img/wpplus.png') }}" height="50">
                <div class="tbk_card_title">Webpay Plus</div><br>
                Webpay es la pasarela de pago de Transbank para realizar transacciones desde Internet con tarjetas bancarias de crédito y débito Redcompra de manera eficaz y segura.<br>
                Este plugin funciona en modalidad Webpay Plus (no modalidad Mall), significa que tienes un código de comercio y un apikey.
            </div>
            <div class="col tbk_column_line_left">
                {{ form_row(webpayPlusForm.form_webpay_active) }}
                {{ form_row(webpayPlusForm.form_webpay_environment) }}
                {{ form_row(webpayPlusForm.form_webpay_commerce_code) }}
                {{ form_row(webpayPlusForm.form_webpay_api_key) }}
                {{ form_row(webpayPlusForm.form_webpay_order_after_payment) }}
            </div>
        </div>
        <div class="card-footer">
            <div class="card-block">
                <div class="d-flex justify-content-end">
                    {{ form_widget(webpayPlusForm.webpay_plus_form_save_button, { 'attr': {'class': 'btn btn-primary float-right tbk_button'} }) }}
                    &nbsp; &nbsp;  
                    {{ form_widget(webpayPlusForm.webpay_plus_form_reset_button, { 'attr': {'class': 'btn btn-primary float-right tbk_button'} }) }}
                </div>
            </div>
        </div>
    </div>
    <div class="card">
        <div class="card-block row">
            <div class="col tbk_column_line">
                <div class="tbk_card_title">¿Quieres operar en producción?</div><br>
                Para operar en el ambiente productivo con dinero real debes tener tu código de comercio y tu API Key (llave secreta).<br><br> 
                <strong>Código de Comercio</strong><br>
                Si no lo tienes puedes solicitarlo usando <a class="tbk_link" href="https://contratar.transbank.cl">el portal de contratación</a>.<br><br> 
                <strong>Tu API Key: Proceso de validación</strong><br>
                Para obtenerla debes comenzar el 
                <a class="tbk_link" target="_blank" href="https://form.typeform.com/to/fZqOJyFZ?typeform-medium=embed-snippet&amp;from=prestashop_webpayplus" style="margin-top: 5px; display: inline-block;clear: both" data-mode="popup" class="typeform-share link button-primary" data-size="100" data-submit-close-delay="25">proceso de validación</a>.
                <br><br> 
                Si tienes dudas puedes revisar nuestras las 
                <a class="tbk_link" target="_blank" href="https://transbankdevelopers.cl/documentacion/como_empezar#puesta-en-produccion">instrucciones detalladas de cómo pasar a producción</a>.
            </div>
            <div class="col">
                <div class="tbk_card_title">Credenciales de Prueba</div><br>
                En el ambiente de integración debes probar usando tarjetas de crédito y débito de prueba.
                <a class="tbk_link" target="_blank" href="https://transbankdevelopers.cl/documentacion/como_empezar#tarjetas-de-prueba">Encuentra las tarjeta de prueba aquí </a>
                <br><br>
                Después de seleccionar el método de pago (en una compra de prueba), llegarás a una página de un banco de prueba.<br> 
                Debes ingresar estas credenciales:<br>
                <strong>Rut: 11.111.111-1</strong><br>
                <strong>Clave: 123</strong>
            </div>
        </div>
    </div>
    {{ form_end(webpayPlusForm) }}

{% endblock %}
    
   